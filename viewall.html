<!DOCTYPE html>
<html>
<head>
  <title>View Itinerary</title>
    <link rel="stylesheet" type="text/css" href="css/viewall2.css"/>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato|Muli"/>
     <link href='https://fonts.googleapis.com/css?family=Raleway:400,200' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.0/firebase.js"></script>
    <script src="./js/owl.js" charset="utf-8"></script>
    <!-- <script src="viewall.js"></script> -->
</head>

  <body>

<div class="page-wrap">
  <div class='homeHeader'>
        <div id="button_header">
          <button id='submitButton' class='buttonhead'>Submit an Itinerary!</button>
          <button id='myProfile' class='buttonhead'>My Profile</button>
          <button id='home' class='buttonhead'>Home</button>
          <button id='FB' class='buttonhead'>Login with Facebook</button>
          <button id='logout' class='buttonhead'>Logout</button>
        </div>
      </div>
</div>

<script>

     var button = document.getElementsByClassName("buttonhead");

    for (var i=0; i<button.length; i++) {

      (function (showbutton) {
        button[i].addEventListener("mouseover", function(e) {e.preventDefault();
          button[showbutton].style.backgroundColor = "#9AD9D0";
          button[showbutton].style.height = '40px';
        }, 'false');
        button[i].addEventListener("mouseout", function(e) {e.preventDefault();
          button[showbutton].style.backgroundColor = "white";
          button[showbutton].style.height = '40px';

        }, 'false');
        // button[i].addEventListener("click", function(e) {e.preventDefault();
        //   alert ("Under construction...")}, 'false');
    }) (i);
    }
 </script>
  <!-- Page specific code -->

      <div id="itineraryResult"></div>
<script>
var ref = new Firebase("https://amber-heat-5381.firebaseio.com");
    //console.logs the information about destination.
    function searchForDestination(destination) {
        ref.orderByChild("destination").equalTo(destination).on("child_added", function(snapshot) {
            // var data = snapshot.val();
            document.location.href = './view_itinerary.html?' + destination
        });
    }

ref.orderByChild("timestamp").limitToLast(10).on("child_added", function(snapshot) {
        var data = snapshot.val();
        console.log(data.transportation);
         $('#imagegrid').append("<div class='card'><p><span class='caption'>" + data.destination + " </span><img src='" + data.photo + "'<class='dates'> "+ data.depart + "></p><span class='activity'> "+ data.tips + "</div></<span></span>>")
          $('.caption').append('<input type="image" class="hotelbutton" src="images/hotel.png" class="btTxt submit" />')
//cant figure out why there are multiple icons
         ;

            // <div class="item"></></div>
    //     $('#owl-demo').append('<a class="item" href="./view_itinerary.html?' + data.destination +  '"><img src="' + data.photo + '"/><td class=inner>Destination: ' + data.destination + '<br> Date: '+ data.depart +'</td></a>');
});

// images.forEach(function(image_url) {
//   $('#images').append("<img src=" + image_url + ">");
// });

// function myFunction() {
//     window.open("http://www.wsj.com");
//     window.open("http://www.nyt.com");
// }

</script>

  </script>
  </div>
<div id="imagegrid">
  </div>

// <script type="text/javascript">
//   $(document).ready(function(){
// //hotel button action

// $(".hotelbutton").click(function(){
//   // window.open("http://www.wsj.com")
//     console.log("hello")
//     window.location.href=('www.wsj.com');
// });


  var ref = new Firebase("https://amber-heat-5381.firebaseio.com");

  

      if(window.location.search) {
          console.log(window.location.search);
          var place = decodeURIComponent(window.location.search).split('?')[1];
          searchForDestination(place);
      }

      // function searchForDestination(destination) {
      //     ref.orderByChild("destination").equalTo(destination).limitToLast(10).on("child_added", function(snapshot) {
      //         var data = snapshot.val();

      //         var results_itin = ("<h3 class='destination'>" + "Search Results for: " + data.destination + "</h3>" +
      //         "<div class='resultsdestination'>" + data.destination + "</div>" +
      //         "<div class='depart'>" + data.depart + "</div>" +
      //         "<div class='tips'>" + data.tips + "</p>" +
      //         "<div>" +
      //           "<div class= 'heartsp'</div>" + "<br><br><br>" +
      //         "</div>")

      //         $('#itineraryResult').append(results_itin)
      //     });
      // }

    $("#home").click(function(){
        console.log("hi");
        window.location.href="index.html"
    });

    $("#submitButton").click(function(){
        console.log("hi");
        window.location.href="travel_submit_itinerary.html"
    });

    $("#myProfile").click(function(){
        console.log("hi");
        window.location.href="profile.html"
    });
  });
  </script>
<!--   </script> -->

<!--    <footer> -->

<footer class="site-footer">
 <div class="footerbox">
          <div id="footerright">
            <div>
            <a href="[full link to your Twitter]">
            <img title="Twitter" alt="Twitter" src="https://socialmediawidgets.files.wordpress.com/2014/03/01_twitter1.png" width="35" height="35" />
            </a>
            <a href="[full link to your LinkedIn]">
            <img title="LinkedIn" alt="LinkedIn" src="https://socialmediawidgets.files.wordpress.com/2014/03/07_linkedin1.png" width="35" height="35" />
            </a>
            <a href="[full link to your Facebook page]">
            <img title="Facebook" alt="Facebook" src="https://socialmediawidgets.files.wordpress.com/2014/03/02_facebook1.png" width="35" height="35" />
            </a>
            <a href="pinterestaddress">
            <img title="Pinterest" alt="Pinterest" src="https://socialmediawidgets.files.wordpress.com/2014/03/13_pinterest1.png" width="35" height="35" />
            </a>
            </div>
          </div>
</div>
</div>

 </div>
 </body>
</html>
